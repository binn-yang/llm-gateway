# å‹åŠ›æµ‹è¯•å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ 30ç§’å¿«é€ŸéªŒè¯

```bash
cd backend/tests/stress
./run_stress_tests.sh
```

**è¿è¡Œæ—¶é—´**: çº¦ 3 åˆ†é’Ÿ
**æµ‹è¯•åœºæ™¯**: 6 ä¸ªå¿«é€Ÿæµ‹è¯• + 1 ä¸ªä¸­ç­‰æµ‹è¯•
**é¢„æœŸç»“æœ**: å…¨éƒ¨é€šè¿‡ âœ…

---

## ğŸ“‹ æµ‹è¯•åœºæ™¯é€ŸæŸ¥

| åœºæ™¯ | å‘½ä»¤ | æ—¶é•¿ | è¯´æ˜ |
|------|------|------|------|
| 1B | `--scenario 1b` | 1s | Mock åŸºå‡† (517 QPS) |
| 2B | `--scenario 2b` | 1s | æµå¼åŸºå‡† (TTFB 55ms) |
| 3 | `--scenario 3` | 2m | ç²˜æ€§ä¼šè¯ (10K è¯·æ±‚) |
| 4 | `--scenario 4` | 5m | è´Ÿè½½å‡è¡¡åˆ†å¸ƒ |
| 5 | `--scenario 5` | 2s | åè®®è½¬æ¢ (78Î¼s å¼€é”€) |
| 6 | `--scenario 6` | 1s | æµå¼åå |
| 7 | `--scenario 7` | 1s | æ•…éšœè½¬ç§» |
| 8 | `--scenario 8` | 30m | å†…å­˜æ³„æ¼æ£€æµ‹ |
| 2 | `--scenario 2` | 10m | å¹¶å‘åå (1000 å¹¶å‘) |

---

## ğŸ’¡ å¸¸ç”¨å‘½ä»¤

### è¿è¡Œæ‰€æœ‰å¿«é€Ÿæµ‹è¯•
```bash
./run_stress_tests.sh
```

### è¿è¡Œç‰¹å®šåœºæ™¯
```bash
# ç²˜æ€§ä¼šè¯æµ‹è¯• (æ¨èå…ˆè¿è¡Œè¿™ä¸ª)
./run_stress_tests.sh --scenario 3

# åè®®è½¬æ¢æµ‹è¯• (æœ€å¿«)
./run_stress_tests.sh --scenario 5
```

### è¿è¡Œæ‰€æœ‰æµ‹è¯• (åŒ…æ‹¬é•¿æ—¶é—´)
```bash
./run_stress_tests.sh --all
```

### è¿è¡ŒåŸºå‡†æµ‹è¯•
```bash
./run_stress_tests.sh --bench
```

### ç›´æ¥ä½¿ç”¨ Cargo
```bash
cd backend

# å¿«é€Ÿæµ‹è¯•
cargo test --test stress_scenarios test_scenario_1b_mock_baseline -- --nocapture

# é•¿æ—¶é—´æµ‹è¯•
cargo test --test stress_scenarios test_scenario_2_concurrent_throughput -- --nocapture --ignored

# Release æ¨¡å¼ (æ¨è)
cargo test --test stress_scenarios --release -- --nocapture
```

---

## ğŸ“Š é¢„æœŸç»“æœç¤ºä¾‹

### åœºæ™¯ 1B: Mock åŸºå‡†
```
Total Requests:      100
Successful:          100 (100.00%)
P99:                 2.03ms
QPS:                 517.37
âœ“ PASSED
```

### åœºæ™¯ 3: ç²˜æ€§ä¼šè¯ (10,000 è¯·æ±‚)
```
Total Requests:      10000
Successful:          10000 (100.00%)
P50:                 12.50ms
P99:                 13.11ms
QPS:                 80.77
âœ“ PASSED
```

### åœºæ™¯ 5: åè®®è½¬æ¢
```
OpenAI P99:          8.14ms
Anthropic P99:       9.81ms
Conversion overhead: 78.54Âµs
âœ“ PASSED
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### ç¼–è¯‘é”™è¯¯
```bash
cargo clean
cargo test --test stress_scenarios --no-run
```

### æµ‹è¯•è¶…æ—¶
æŸäº›æµ‹è¯•éœ€è¦è¾ƒé•¿æ—¶é—´:
- åœºæ™¯ 3: ~2 åˆ†é’Ÿ
- åœºæ™¯ 4: ~5 åˆ†é’Ÿ
- åœºæ™¯ 8: 30 åˆ†é’Ÿ

è¿™æ˜¯æ­£å¸¸çš„ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚

### ç«¯å£å†²çª
Mock æœåŠ¡å™¨ä½¿ç”¨éšæœºç«¯å£ï¼Œé€šå¸¸ä¸ä¼šå†²çªã€‚å¦‚æœé‡åˆ°é—®é¢˜ï¼Œé‡å¯æµ‹è¯•å³å¯ã€‚

### æ€§èƒ½å·®å¼‚
ä½¿ç”¨ `--release` æ¨¡å¼è¿›è¡Œæ€§èƒ½æµ‹è¯•:
```bash
cargo test --test stress_scenarios --release
```

Debug æ¨¡å¼å¯èƒ½æ…¢ 10-100 å€ã€‚

---

## ğŸ“– æ›´å¤šæ–‡æ¡£

- **è¯¦ç»†ä½¿ç”¨æŒ‡å—**: `README.md`
- **å®æ–½æŠ¥å‘Š**: `../STRESS_TESTS_IMPLEMENTATION.md`
- **æºä»£ç **: `../stress_scenarios.rs`

---

## âœ… æˆåŠŸæ ‡å‡†

æ‰€æœ‰å¿«é€Ÿæµ‹è¯•åº”è¯¥:
- âœ… æˆåŠŸç‡ 100%
- âœ… P99 å»¶è¿Ÿ < 50ms (Mock)
- âœ… æ— ç¼–è¯‘é”™è¯¯æˆ–è­¦å‘Š
- âœ… æ€»è¿è¡Œæ—¶é—´ < 5 åˆ†é’Ÿ

å¦‚æœä»¥ä¸Šæ ‡å‡†éƒ½æ»¡è¶³ï¼Œè¯´æ˜å‹åŠ›æµ‹è¯•æ¡†æ¶å·¥ä½œæ­£å¸¸ï¼

---

## ğŸ¯ æ¨èæµ‹è¯•æµç¨‹

### ç¬¬ä¸€æ¬¡è¿è¡Œ
1. è¿è¡Œå¿«é€ŸéªŒè¯: `./run_stress_tests.sh`
2. æ£€æŸ¥æ‰€æœ‰æµ‹è¯•é€šè¿‡
3. æŸ¥çœ‹æ€§èƒ½æŒ‡æ ‡

### æ—¥å¸¸å¼€å‘
1. ä¿®æ”¹ä»£ç åè¿è¡Œå¿«é€Ÿæµ‹è¯•
2. æäº¤å‰è¿è¡Œåœºæ™¯ 3 (ä¸­ç­‰æµ‹è¯•)
3. å‘å¸ƒå‰è¿è¡Œ `--all` (å®Œæ•´æµ‹è¯•)

### æ€§èƒ½è°ƒä¼˜
1. è¿è¡ŒåŸºå‡†æµ‹è¯•: `./run_stress_tests.sh --bench`
2. ä¿å­˜ baseline: `cargo bench -- --save-baseline main`
3. ä¼˜åŒ–åå¯¹æ¯”: `cargo bench -- --baseline main`

---

**ç¥æµ‹è¯•é¡ºåˆ©ï¼** ğŸš€
